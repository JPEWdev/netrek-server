#
# DO NOT EDIT- ../system.mk file should set everything up
# See specifically X11LIB and X11INCLUDE
#
CONFIG = system.mk
VPATH = @srcdir@
srcdir = @srcdir@

include ../$(CONFIG)

INSTALL = @INSTALL@
INSTALLPROG = @INSTALL_PROGRAM@
INSTALLDATA = @INSTALL_DATA@

TARGET = xsg

HEADERS =		Wlib.h bitmaps.h copyright.h copyright2.h data.h \
			defs.h oldbitmaps.h patchlevel.h struct.h version.h \
			localdata.h

SRCS =	${srcdir}/colors.c ${srcdir}/../ntserv/data.c ${srcdir}/defaults.c \
	${srcdir}/dmessage.c ${srcdir}/../ntserv/getship.c \
	${srcdir}/inform.c ${srcdir}/input.c ${srcdir}/main.c \
	${srcdir}/modify.c ${srcdir}/newwin.c ${srcdir}/option.c \
	${srcdir}/planetlist.c ${srcdir}/planets.c ${srcdir}/playerlist.c \
	${srcdir}/redraw.c ${srcdir}/robotwin.c ${srcdir}/shmem.c \
	${srcdir}/sintab.c ${srcdir}/smessage.c ${srcdir}/stats.c \
	${srcdir}/util.c ${srcdir}/war.c ${srcdir}/warning.c \
	${srcdir}/x11window.c ${srcdir}/localdata.c \
	${srcdir}/../ntserv/getpath.c ${srcdir}/../ntserv/distress.c \
	${srcdir}/../ntserv/slotmaint.c ${srcdir}/../ntserv/ltd_stats.c

OBJS =	colors.o data.o defaults.o dmessage.o ../ntserv/getship.o inform.o \
	input.o main.o modify.o newwin.o option.o planetlist.o planets.o \
	playerlist.o redraw.o robotwin.o shmem.o sintab.o smessage.o stats.o \
	util.o war.o warning.o x11window.o localdata.o ../ntserv/getpath.o \
	../ntserv/distress.o ../ntserv/slotmaint.o ../ntserv/ltd_stats.o

LIBS = $(X11LIB) $(EXTRALIBS)
INCS = $(EXTRAINCS) $(X11INCLUDE)

CFLAGS = $(EXTRACFLAGS) $(FLAGS) ${INCS} -I. -I${srcdir} -I../include -I${srcdir}/../include

all: xsg

xsg: $(OBJS)
	$(CC) $(CFLAGS) ${LDFLAGS} -o $@ $(OBJS) $(LIBS)

# data.c has an ifdef XSG in it, it must be recompiled here.

data.o:	${srcdir}/../ntserv/data.c
	$(CC) $(CFLAGS) -c ${srcdir}/../ntserv/data.c

clean:
	/bin/rm -f *.o make.out core
        
reallyclean:  clean 
	/bin/rm -f xsg #* *~

install: xsg
	$(INSTALLPROG) $(INSTALLOPTS) xsg $(LIBDIR)/xsg

uninstall:
	-cd $(LIBDIR); rm -f xsg 

dist: ../name
	tar cvf - `cat Manifest` | gzip - > xsg2.1-`../name`.tar.gz

rmdependencies:
	rm -f .depend

depend::
	${CC} -M $(CFLAGS) $(SRCS) > .depend

sinclude .depend
# DO NOT DELETE
